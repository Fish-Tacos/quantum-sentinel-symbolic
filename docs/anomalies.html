<!doctype html><meta charset="utf-8">
<title>Quantum Sentinel — Anomalies</title>
<style>
body{font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;margin:24px}
table{border-collapse:collapse;width:560px}
th,td{border-bottom:1px solid #ddd;padding:6px 8px;text-align:left}
.spark{width:560px;height:80px;margin:12px 0}
</style>
<h2>Anomalies (rolling z ≥ 2.0)</h2>
<div id=meta></div><svg id=spark class=spark></svg>
<table id=tbl><thead><tr><th>Date (UTC)</th><th>Count</th><th>z</th><th>μ±σ</th></tr></thead><tbody></tbody></table>
<script>
(async()=>{
  const j = await (await fetch('anomalies.json')).json();
  document.getElementById('meta').textContent = `window=${j.window_days}d, anomalies=${j.anomalies.length}`;
  const rows = j.anomalies.map(a=>`<tr><td>${a.date}</td><td>${a.count}</td><td>${a.z}</td><td>${a.baseline_mean} ± ${a.baseline_sd}</td></tr>`).join('');
  document.querySelector('#tbl tbody').innerHTML = rows || '<tr><td colspan=4>No anomalies yet</td></tr>';
  const svg=document.getElementById('spark'),W=svg.clientWidth,H=svg.clientHeight;
  const ys=j.anomalies.map(a=>a.z); if(!ys.length){svg.innerHTML='';return;}
  const min=Math.min(...ys),max=Math.max(...ys),x=i=>10+i*((W-20)/((ys.length-1)||1)),y=v=>H-10-((v-min)/((max-min)||1))*(H-20);
  svg.innerHTML=`<polyline fill="none" stroke="black" stroke-width="2" points="${ys.map((z,i)=>`${x(i)},${y(z)}`).join(' ')}"/>`;
})();
</script>
